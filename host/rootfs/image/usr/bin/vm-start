#!/bin/execlineb -WS1
# SPDX-License-Identifier: EUPL-1.2+
# SPDX-FileCopyrightText: 2022-2023, 2025 Alyssa Ross <hi@alyssa.is>
# SPDX-FileCopyrightText: 2025 Demi Marie Obenour <demiobenour@gmail.com>
case $1 {
  [A-Za-z0-9][A-Za-z0-9._-]* {
    backtick -E id {
      backtick -E id_path { readlink /run/vm/by-name/${1} }
      basename -- $id_path
    }
    ${0}-by-id $id
  }
}

foreground { fdmove -c 1 2 printf "Bad VM name %s\\n" $1 }
exit 100
